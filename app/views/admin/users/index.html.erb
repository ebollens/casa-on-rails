<h1>Users</h1>

<p><%= link_to 'Create New User',
            new_admin_user_path,
            :class => 'button',
            :role => 'button' %></p>

<div style="overflow-x:scroll;">

  <table class="table" id="users-list">

    <thead>
      <tr>
        <th style="text-align:left;">Username</th>
        <th>Admin</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><strong><%= user.username ? user.username : (user.oauth2_identity ? "[#{user.oauth2_identity.provider}] #{user.oauth2_identity.provider_user_id}" : '-') %></strong></td>
          <td class="text-center"><%= user.admin ? 'Yes' : 'No' %></td>
          <td><%= link_to 'Show', admin_user_path(user) %></td>
          <td><%= link_to 'Edit', edit_admin_user_path(user) %></td>
          <td><%= link_to 'Destroy', admin_user_path(user),
                      method: :delete,
                      data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>

  </table>

</div>

<script type="text/javascript">
  $('#users-list').dataTable({
    "order": [[0, "asc"]]
  });
</script>

<p><%= link_to 'Create New User',
               new_admin_user_path,
               :class => 'button',
               :role => 'button' %></p>